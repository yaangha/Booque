<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
    <meta charset="UTF-8">
    <title>Book Cart</title>
    
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
        crossorigin="anonymous" />
        
    <style>
        * {
            font-family: 'NanumBarunGothic';        
        }
    </style>
</head>
<body>
	
    <div class="w-70 container">
	
	<!-- 진행 순서 보여주기 -->
	<ul class="list-group list-group-horizontal">
		<li class="list-group-item border-0" style="font-weight: bold;">01 CART</li>
		<li class="list-group-item border-0" style="color:gray;">></li>
		<li class="list-group-item border-0" style="color:gray;">02 ORDER</li>
		<li class="list-group-item border-0" style="color:gray;">></li>
		<li class="list-group-item border-0" style="color:gray;">03 ORDER CONFIRMED</li>
	</ul>
    <!-- 약간의 개인정보 넣어두기 (헷갈리지 않게) -->
    <div th:text="${ user.username }"></div>
    
	<!-- 주문내역 -->
	<table class="w-100 table" style="text-align: center;"   th:each="cart : ${ cartList }">
		<thead class="table-light">
			<th colspan="2">도서 정보</th>
			<th>수량</th>
			<th>주문금액</th>
			<th>배송비</th>
			<th></th>
		</thead>
		<tbody style="height: 200px;">
			<td class="align-middle">
			<input type="checkbox" style="width: 30px;" />
			<img th:src="${ cart.image }" style="width: 150px;"/></td>
			<td class="align-middle" style="text-align: left;"><!-- 도서 간략 정보 -->
						<small class="d-inline-flex px-2 my-1 border rounded text-secondary">
                        
							<span th:text="${ cart.group }"></span><span> / </span><span th:text="${ cart.category }"></span>
						</small>
						<div class="h5" th:text="${ cart.title }"></div>
						<div th:text="${ cart.author }"></div>
						<div> [[${ cart.prices }]]
							<span>원</span>
							<small class="px-1 border border-primary rounded text-primary">p</small>
							<small class="text-primary">[[${ cart.prices*0.05 }]]</small> 
						</div>
			</td>
			<td class="align-middle">
                <input type='button' onclick='btnCount("plus")'  value='+'/>
                <span style="width: 50px" id="countS"> [[${ cart.count }]] </span>
                <!-- 뭐지?? -->
                <input type='button' onclick='btnCount("minus")' value='-'/>

			</td>
			<td class="align-middle">
				<div id="price">
					[[${ cart.prices }]]<span>원</span>
				</div>
			</td>
			<td class="align-middle">10,000원 이상<br/>
				배송비 무료</td>
			<td class="align-middle">
				<button type="button" class="btn btn-dark btn-sm my-2" style="width: 100px;">Buy Now</button><br/>
				<button type="button" class="btn btn-danger btn-sm my-2" style="width: 100px;">Delete</button>
			</td>
		</tbody>
	</table>
	
	<button type="button" class="btn btn-outline-dark btn-sm">선택상품 삭제</button>
	<button type="button" class="btn btn-outline-dark btn-sm">선택상품 주문</button>
	
	<!-- 가격 정보 -->
	<table class="my-2 w-100 table" style="text-align: center;">
		<thead class="table-light">
			<th>총 주문금액</th>
			<th>할인금액</th>
			<th>배송비</th>
			<th>총 결제금액</th>
		</thead>
		<tbody style="height: 200px;">
			<td class="align-middle">
				122<span>원</span>
			</td>
			<td class="align-middle">
				0<span>원</span>
			</td>
			<td class="align-middle">
				0<span>원</span>
			</td>
			<td class="align-middle">
				13,000<span>원</span>
			</td>
		</tbody>
	</table>
	
	<!-- 하단 버튼 -->
	<div class="row">
		<button type="button" class="col w-50 m-2 btn btn-outline-dark">쇼핑 계속하기</button>
		<button type="button" class="col w-50 m-2 btn btn-dark">결제하기</button>
	</div>



	<span class="h4" th:text="${ user.username }"></span><span> 님이 찜한 상품은?</span>

    <div id="carouselExampleInterval" class="p-2 carousel slide bg-light" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active" data-bs-interval="10000">
            <div class="row">
                <div class="col" >
                <div class="card my-2" style="width: 15rem; height:450px;">
                    <div style="width:237px; height:330px;">
                        <a ><img  class="card-img-top" alt="테스트" ></a>
                    </div>
                    <div class="card-body">
                        <div class="card-text">
                            <span class="h5" ></span><br/>
                            <span ></span><br/>
                            <span ></span><span>원</span>
                        </div>
                    </div> <!-- card body end -->
                </div> <!-- card end -->
                </div> <!-- col end -->
            </div> <!-- row end -->
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span> 
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span> 
            <span class="visually-hidden">Next</span>
        </button>

        
        
        
    </div>



	</div> <!-- 메인 블록 end -->
	
    <!-- 수량 버튼 처리 -->
    <script type="text/javascript">
    
    function btnCount(type)  {
    	  // 결과를 표시할 element
    	  const resultElement = document.getElementById('countS');
    	  
    	  // 현재 화면에 표시된 값
    	  let number = resultElement.innerText;
    	  // 더하기/빼기
    	  if(type === 'plus') {
    	    number = parseInt(number) + 1;
    		console.log(number)
    	    
    	  }else if(type === 'minus')  {
    		  
    	    number = parseInt(number) - 1;
    		console.log(number)
    		
    	       if(number == 0){
    	    	   alert('수량은 0이하가 되지 못합니다.')
    	    	   return;
    	       }
    	    
    	  }
    	  
    	  // 결과 출력
    	  resultElement.innerText = number;
    	}
    
    </script>
    
    
    <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous">
    </script>

</body>
</html>